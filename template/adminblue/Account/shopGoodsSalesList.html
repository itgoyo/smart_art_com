{extend name="adminblue/base" /}{block name="resources"/}<script src="ADMIN_JS/highcharts.js"></script><script src="ADMIN_JS/exporting.js"></script><script type="text/javascript" src="__STATIC__/My97DatePicker/WdatePicker.js"></script><style  type="text/css">.alert li{font-size: 12px;}</style>{/block}{block name="main"}<div class="alert">	<ul>		<li>1、符合以下任何一种条件的订单即为有效订单：a）采用在线支付方式支付并且已付款；b）采用货到付款方式支付并且交易已完成</li>		<li>2、以下列表为从昨天开始最近30天有效订单中的所有商品数据</li>		<li>3、近30天下单商品数：从昨天开始最近30天有效订单的某商品总销量</li>		<li>4、近30天下单金额：从昨天开始最近30天有效订单的某商品总销售额</li>	</ul></div><table class="mytable">	<tr>		<th>			<span>商品名称：</span>			<input type="text" id="goods_name" class="input-common" placeholder="请输入商品名称" />			<span>下单时间：</span>			<input type="text" id="startDate" class="input-common w100" placeholder="请选择开始日期" onclick="WdatePicker()" />			&nbsp;-&nbsp;			<input type="text" id="endDate" placeholder="请选择结束日期" class="input-common w100" onclick="WdatePicker()" />			<input type="submit" class="btn-common" value="搜索" onclick="LoadingInfo(1);"/>			<input class="btn-common" type="button" onclick="dataExcel()" value="导出数据"/>		</th>	</tr></table><table class="table-class">	<colgroup>		<col style="width: 40%;">		<col style="width: 15%;">		<col style="width: 10%;">		<col style="width: 10%;">		<col style="width: 15%;">		<col style="width: 5%;">	</colgroup>	<thead>		<tr align="center">			<th>商品名称</th>			<th>规格</th>			<th>库存数</th>			<th>下单商品数</th>			<th>下单金额</th>		</tr>	</thead>	<colgroup>		<col style="width: 40%;">		<col style="width: 15%;">		<col style="width: 10%;">		<col style="width: 10%;">		<col style="width: 15%;">	</colgroup>	<tbody></tbody></table><script type="text/javascript">function LoadingInfo(page_index) {	var goods_name = $("#goods_name").val();	var start_date = $('#startDate').val();	var end_date = $('#endDate').val();	$.ajax({		type : "post",		url : "{:__URL('ADMIN_MAIN/account/shopgoodssaleslist')}",		data : {			"page_index" : page_index,			"page_size" : $("#showNumber").val(),			"goods_name":goods_name,			"start_date" : start_date,			"end_date" : end_date,		},		success : function(data) {			var html = '';			if (data["data"].length > 0) {				for (var i = 0; i < data["data"].length; i++) {					var goods_name = "";					if(data["data"][i]["goods_name"].length > 55){						goods_name = data["data"][i]["goods_name"].substring(0 ,56)+"..." ;					}else{						goods_name =  data["data"][i]["goods_name"];					}					html += '<tr align="center">';					html += '<td style="text-align: left;" class="tal" title="' + data["data"][i]["goods_name"] + '">' + goods_name + '</td>';					html += '<td class="tal">' + data["data"][i]["sku_name"] + '</td>';                    html += '<td>' + data["data"][i]["stock"] + '</td>';					html += '<td>' + data["data"][i]["sales_info"]["sales_num"] + '</td>';					html += '<td>' + data["data"][i]["sales_info"]["sales_money"] + '</td>';					html += '</tr>';				}			} else {				html += '<tr align="center"><td colspan="5">暂无符合条件的数据记录</td></tr>';			}			$(".table-class tbody").html(html);			initPageData(data["page_count"],data['data'].length,data['total_count']);			$("#pageNumber").html(pagenumShow(jumpNumber,$("#page_count").val(),{$pageshow}));		}	});}function dataExcel(){    var goods_name = $('#goods_name').val();    var start_date = $('#startDate').val();    var end_date = $('#endDate').val();    window.location.href=__URL("ADMIN_MAIN/account/goodsDataExcel?goods_name="+goods_name+'&start_date='+start_date+'&end_date='+end_date);}</script>{/block}